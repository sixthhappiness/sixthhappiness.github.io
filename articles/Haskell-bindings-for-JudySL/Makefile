# Without before.xml and after.xml, file generated by pandoc is not
# well-formed XML.

PANDOC = pandoc --wrap=none -f markdown+smart -t markdown-smart --highlight-style=kate

all: index.html

index.html: index.xml contents.xml contents.lhs before.xml after.xml ../../articles.xml
	xsltproc index.xml > index.html

contents.xml: contents.lhs
	$(PANDOC) -f markdown+lhs -t html+lhs contents.lhs > temp.xml
	cat before.xml temp.xml after.xml > contents.xml
	rm -f temp.xml

clean:
	rm -rf *~ contents.xml index.html temp.xml
